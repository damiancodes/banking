{"ast":null,"code":"import React,{useState}from'react';import TransactionItem from'./TransactionItem';import LoadingSpinner from'./LoadingSpinner';import ErrorMessage from'./ErrorMessage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionLog=_ref=>{let{transactions,loading=false,error=null,onTransactionClick,currentAccount,showFilters=true,onRetry,title='Recent Transactions'}=_ref;const[filter,setFilter]=useState('all');const[currencyFilter,setCurrencyFilter]=useState('all');const filteredTransactions=transactions.filter(transaction=>{// Filter by direction\nif(currentAccount){if(filter==='incoming'&&transaction.to_account!==currentAccount)return false;if(filter==='outgoing'&&transaction.from_account!==currentAccount)return false;}// Filter by currency\nif(currencyFilter!=='all'&&transaction.currency!==currencyFilter)return false;return true;});const groupTransactionsByDate=transactions=>{const groups={};transactions.forEach(transaction=>{const date=new Date(transaction.created_at).toDateString();if(!groups[date]){groups[date]=[];}groups[date].push(transaction);});return groups;};const groupedTransactions=groupTransactionsByDate(filteredTransactions);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center py-8\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-gray-600\",children:\"Loading transactions...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(ErrorMessage,{message:error,onRetry:onRetry})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:title}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[filteredTransactions.length,\" transactions\"]})]}),showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 space-y-3\",children:[currentAccount&&/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:[{key:'all',label:'All'},{key:'incoming',label:'Incoming'},{key:'outgoing',label:'Outgoing'}].map(option=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter(option.key),className:\"\\n                    px-3 py-2 rounded-lg text-sm font-medium transition-colors\\n                    \".concat(filter===option.key?'bg-kcb-primary text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200',\"\\n                  \"),children:option.label},option.key))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:['all','KES','USD','NGN'].map(currency=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrencyFilter(currency),className:\"\\n                  px-3 py-2 rounded-lg text-sm font-medium transition-colors\\n                  \".concat(currencyFilter===currency?'bg-kcb-primary text-white':'bg-gray-100 text-gray-700 hover:bg-gray-200',\"\\n                \"),children:currency==='all'?'All Currencies':currency},currency))})]}),Object.keys(groupedTransactions).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"No transactions found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Transactions will appear here once you make transfers\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:Object.entries(groupedTransactions).sort((_ref2,_ref3)=>{let[a]=_ref2;let[b]=_ref3;return new Date(b).getTime()-new Date(a).getTime();}).map(_ref4=>{let[date,dayTransactions]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-2 px-1\",children:new Date(date).toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden\",children:dayTransactions.map(transaction=>/*#__PURE__*/_jsx(TransactionItem,{transaction:transaction,currentAccount:currentAccount,onClick:()=>onTransactionClick===null||onTransactionClick===void 0?void 0:onTransactionClick(transaction),showDetails:true},transaction.id))})]},date);})})]});};export default TransactionLog;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}