{"ast":null,"code":"import _objectSpread from\"/home/damien/Desktop/Treasury Movement Simulator/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import LoadingSpinner from'./LoadingSpinner';import ErrorMessage from'./ErrorMessage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransferForm=_ref=>{let{accounts,onSubmit,loading=false,error=null,initialFromAccount=null,onCancel}=_ref;const[formData,setFormData]=useState({from_account:(initialFromAccount===null||initialFromAccount===void 0?void 0:initialFromAccount.name)||'',to_account:'',amount:0,note:''});const[validationErrors,setValidationErrors]=useState({});const[exchangeRate,setExchangeRate]=useState(null);const[convertedAmount,setConvertedAmount]=useState(null);const fromAccount=accounts.find(acc=>acc.name===formData.from_account);const toAccount=accounts.find(acc=>acc.name===formData.to_account);useEffect(()=>{if(initialFromAccount){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{from_account:initialFromAccount.name}));}},[initialFromAccount]);useEffect(()=>{if(fromAccount&&toAccount&&formData.amount>0){if(fromAccount.currency!==toAccount.currency){const rates={KES:0.0067,USD:1,NGN:0.00125};const rate=rates[toAccount.currency]/rates[fromAccount.currency];setExchangeRate(rate);setConvertedAmount(formData.amount*rate);}else{setExchangeRate(null);setConvertedAmount(null);}}},[fromAccount,toAccount,formData.amount]);const validateForm=()=>{const errors={};if(!formData.from_account){errors.from_account='Please select a source account';}if(!formData.to_account){errors.to_account='Please select a destination account';}if(formData.from_account===formData.to_account){errors.to_account='Source and destination accounts must be different';}if(!formData.amount||formData.amount<=0){errors.amount='Please enter a valid amount';}if(fromAccount&&formData.amount>fromAccount.balance){errors.amount=\"Insufficient balance. Available: \".concat(fromAccount.formatted_balance);}setValidationErrors(errors);return Object.keys(errors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}await onSubmit(formData);};const handleInputChange=(field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));if(validationErrors[field]){setValidationErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:''}));}};const formatCurrency=(amount,currency)=>{const symbols={KES:'KSh',USD:'$',NGN:'â‚¦'};const symbol=symbols[currency]||currency;return\"\".concat(symbol,\" \").concat(amount.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"Transfer Money\"}),onCancel&&/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),error&&/*#__PURE__*/_jsx(ErrorMessage,{message:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"From Account\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.from_account,onChange:e=>handleInputChange('from_account',e.target.value),className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-kcb-primary focus:border-transparent \".concat(validationErrors.from_account?'border-red-500':'border-gray-300'),disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select source account\"}),accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.name,children:[account.name,\" - \",account.formatted_balance]},account.name))]}),validationErrors.from_account&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:validationErrors.from_account})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"To Account\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.to_account,onChange:e=>handleInputChange('to_account',e.target.value),className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-kcb-primary focus:border-transparent \".concat(validationErrors.to_account?'border-red-500':'border-gray-300'),disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select destination account\"}),accounts.filter(account=>account.name!==formData.from_account).map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.name,children:[account.name,\" - \",account.formatted_balance]},account.name))]}),validationErrors.to_account&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:validationErrors.to_account})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Amount (\",(fromAccount===null||fromAccount===void 0?void 0:fromAccount.currency)||'Currency',\")\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",value:formData.amount||'',onChange:e=>handleInputChange('amount',parseFloat(e.target.value)||0),className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-kcb-primary focus:border-transparent \".concat(validationErrors.amount?'border-red-500':'border-gray-300'),placeholder:\"Enter amount\",disabled:loading}),validationErrors.amount&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-600\",children:validationErrors.amount}),fromAccount&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:[\"Available balance: \",fromAccount.formatted_balance]})]}),exchangeRate&&convertedAmount&&toAccount&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[\"Exchange Rate: 1 \",fromAccount===null||fromAccount===void 0?void 0:fromAccount.currency,\" = \",exchangeRate.toFixed(4),\" \",toAccount.currency]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800 font-medium\",children:[\"Converted Amount: \",formatCurrency(convertedAmount,toAccount.currency)]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Note (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.note,onChange:e=>handleInputChange('note',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-kcb-primary focus:border-transparent\",placeholder:\"Add a note for this transfer\",rows:3,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"flex-1 bg-kcb-primary text-white py-3 px-6 rounded-lg hover:bg-kcb-primary-dark transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\"Processing...\"})]}):'Transfer Money'}),onCancel&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,disabled:loading,className:\"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Cancel\"})]})]})]});};export default TransferForm;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}