{"ast":null,"code":"import React,{useState}from'react';import{useAccounts}from'../hooks/useAccounts';import{useTransactions}from'../hooks/useTransactions';import Header from'../components/Header';import BalanceCard from'../components/BalanceCard';import AccountList from'../components/AccountList';import TransactionLog from'../components/TransactionLog';import TransferForm from'../components/TransferForm';import QuickActions from'../components/QuickActions';import SuccessMessage from'../components/SuccessMessage';import Layout from'../components/Layout';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[currentView,setCurrentView]=useState('overview');const[selectedAccount,setSelectedAccount]=useState(null);const[selectedCurrency,setSelectedCurrency]=useState(null);const[successMessage,setSuccessMessage]=useState(null);const{accounts,summary,loading:accountsLoading,error:accountsError,getAccountsByurrency,getTotalBalance,refreshAccounts}=useAccounts();const{transactions,loading:transactionsLoading,error:transactionsError,creating:transferLoading,createTransaction,getRecentTransactions,refreshTransactions}=useTransactions();const handleRefresh=async()=>{await Promise.all([refreshAccounts(),refreshTransactions()]);};const handleTransfer=async transferData=>{const result=await createTransaction(transferData);if(result){setSuccessMessage(\"Transfer of \".concat(result.formatted_amount,\" completed successfully!\"));setCurrentView('overview');refreshAccounts();// Refresh to get updated balances\n}};const handleAccountSelect=account=>{setSelectedAccount(account);setCurrentView('transfer');};const handleCurrencySelect=currency=>{setSelectedCurrency(currency);setCurrentView('accounts');};const handleTransactionClick=transaction=>{// Could navigate to transaction details or show modal\nconsole.log('Transaction clicked:',transaction);};const renderCurrentView=()=>{switch(currentView){case'accounts':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('overview'),className:\"flex items-center text-kcb-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Back to Overview\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold\",children:selectedCurrency?\"\".concat(selectedCurrency,\" Accounts\"):'All Accounts'})]}),/*#__PURE__*/_jsx(AccountList,{accounts:selectedCurrency?getAccountsByurrency(selectedCurrency):accounts,loading:accountsLoading,error:accountsError,onAccountSelect:handleAccountSelect,showDetails:true,onRetry:refreshAccounts})]});case'transfer':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center px-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('overview'),className:\"flex items-center text-kcb-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Back to Overview\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(TransferForm,{accounts:accounts,onSubmit:handleTransfer,loading:transferLoading,error:transactionsError,initialFromAccount:selectedAccount,onCancel:()=>setCurrentView('overview')})})]});case'history':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center px-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('overview'),className:\"flex items-center text-kcb-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})}),\"Back to Overview\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(TransactionLog,{transactions:transactions,loading:transactionsLoading,error:transactionsError,onTransactionClick:handleTransactionClick,showFilters:true,onRetry:refreshTransactions,title:\"Transaction History\"})})]});default:// overview\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(QuickActions,{onTransferClick:()=>setCurrentView('transfer'),onHistoryClick:()=>setCurrentView('history'),onRefreshClick:handleRefresh,isRefreshing:accountsLoading||transactionsLoading}),/*#__PURE__*/_jsx(BalanceCard,{summary:summary,onCurrencySelect:handleCurrencySelect}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Your Accounts\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('accounts'),className:\"text-kcb-primary text-sm font-medium\",children:\"View All\"})]}),/*#__PURE__*/_jsx(AccountList,{accounts:accounts.slice(0,4)// Show first 4 accounts\n,loading:accountsLoading,error:accountsError,onAccountSelect:handleAccountSelect,onRetry:refreshAccounts})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(TransactionLog,{transactions:getRecentTransactions(5),loading:transactionsLoading,error:transactionsError,onTransactionClick:handleTransactionClick,showFilters:false,onRetry:refreshTransactions,title:\"Recent Activity\"})})]});}};return/*#__PURE__*/_jsxs(Layout,{header:/*#__PURE__*/_jsx(Header,{totalBalance:getTotalBalance(),userName:\"Treasury Manager\",onRefresh:handleRefresh,isRefreshing:accountsLoading||transactionsLoading}),children:[successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 pt-4\",children:/*#__PURE__*/_jsx(SuccessMessage,{message:successMessage,autoHide:true,onClose:()=>setSuccessMessage(null)})}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-6\",children:renderCurrentView()})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}